# Cyberdeck

A repo containing scripts and configuration files for Raspberry Pi 400 based Cyberdeck.

## Hardware

- [Raspberry Pi 400](https://www.adafruit.com/product/4795)
- [Hyperpixel 4" touchscreen](https://www.adafruit.com/product/3578)
- [Cyberdeck HAT](https://www.adafruit.com/product/4863)

## Features

- Auto detect when docked and undocked.
  - **Docked** - HDMI is plugged in. Turns HDMI display into LXDE desktop and the touchscreen into a fullscreen xterm session.
- Properly configures touchscreen to work in both docked and undocked mode.
- Turn off touchscreen backlight when screensaver is active.
- Mindfull meditation plan

## Commands

- `start` - start the cyberdeck
- `banner` - print a status banner
- `screensaver` - turn off the touchscreen backlight when the screensaver is active
- `terminal` - launch a full screen xterm session on the touchscreen
- `medidate [-d,--duration=MINUTES]` - launch a mindfull meditation session for the specified time
  - Randomly creates a session from a selection of available mindfull meditation audio clips
  - You can't hack if you're not grounded in the present moment!


## Setup

### Hardware Configuration Files and Setup Scripts

| Filename | Description |
|----------|-------------|
| `dispsetup.sh` | Autogenerated by `hyperpixel4-rotate`, configures HDMI and touchscreen displays when docked. |
| `97-hyperpixel4-permissions.rules` | udev rule to allow the `video` group to turn the touchscreen backlight off and on. |
| `98-hyperpixel4-calibration.rules` | Autogenerated by `hyperpixel4-rotate`, sets the proper touchscreen xinput transformation matrix when not docked. |
| `Xresources` | xterm config to make copy/paste more intuitive. |

### Procedure

- Verify that VLC is installed.
  ```bash
  sudo apt-get install vlc
  ```

- Install screen configuration and calibration files.
  ```bash
  sudo cp setup/dispsetup.sh /usr/share
  sudo cp setup/udev/97-hyperpixel4-permissions.rules /etc/udev.d/rules
  sudo cp setup/udev/98-hyperpixel4-calibration.rules /etc/udev.d/rules
  ```

- Install the xterm config to make copy/paste more intuitive (`ctrl+shift+c` and `ctrl+shift+v`)
  ```bash
  cat setup/Xresources >> ~/.Xresources
  xrdb -merge ~/.Xresources
  ```

- Configure the start script to run after logging into LXDE.
  ```
  sudo vim /etc/xdg/lxsession/LXDE-pi/autostart
  # add the following to the end of the file
  @/path/to/cyberdeck/cyberdeck.py start
  ```

- (Optional) Add cool cyberdeck banner to `.bashrc`
  ```bash
  vim ~/.bashrc
  # At the end of the file, add:
  alias cyberdeck=/path/to/cyberdeck/cyberdeck.py
  cyberdeck banner
  ```

- Store audio clips of minfull meditation sessions in the `./audio/meditations` directory.
- Store an alarm audio clip that will be played after the meditation session has ended in the
  `./audio/alarm.mp3` file.
